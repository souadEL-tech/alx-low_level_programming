C finction and nested_loop
